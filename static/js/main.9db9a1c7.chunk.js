(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(30)},27:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var i=n(1),o=n.n(i),l=n(14),r=n.n(l),u=(n(26),n(27),n(9)),a=n(8),s=n(15),c=n(16),g=n(19),b=n(17),d=n(20),p=n(38),m=n(39),f=n(35),v=function(){return o.a.createElement("div",{className:"text-center bordered-round"},o.a.createElement("h4",null,"Puerto Rico Scoresheet"),o.a.createElement("p",{className:"lead text-muted"},"Helping you figure out how badly you lost since 2018"))},h=n(36),C=n(37),B=n(32),E=n(31),y=n(33),N=n(34);var A=function(e){return o.a.createElement(E.a,null,o.a.createElement("label",{htmlFor:e.inputId,className:"mx-1 sr-only"},e.labelText),o.a.createElement("input",{type:"text",id:e.inputId,placeholder:e.inputPlaceholder,value:e.inputValue,className:"form-control-sm",onChange:e.handleBonusInput,onClick:function(e){e.stopPropagation()}}))};var O=function(e){var t,n=e.bonusContributor<=0?"":e.bonusContributor,i=function(t){e.setBonusContributor(parseInt(t.target.value,10))};switch(e.buildingName){case"Residence":t=o.a.createElement(A,{inputId:"islandSpaces",labelText:"Total occupied island spaces",inputPlaceholder:"Island spaces",inputValue:n,handleBonusInput:i});break;case"Fortress":t=o.a.createElement(A,{inputId:"totalWorkers",labelText:"Total number of workers",inputPlaceholder:"Total workers",inputValue:n,handleBonusInput:i});break;default:t=""}return o.a.createElement("div",null,o.a.createElement("hr",{className:"my-1"}),o.a.createElement(B.a,{inline:!0,className:"justify-content-center"},o.a.createElement(E.a,{check:!0},o.a.createElement(y.a,{className:"mx-1",check:!0},o.a.createElement(N.a,{type:"checkbox",checked:e.isActive,onChange:e.handleActive})," \ud83d\udc77\ud83c\udffe ?")),t))};var S=function(e){var t,n=e.isBuilt?"bg-success":"bg-light";return t=e.hasBonusPanel?o.a.createElement(O,{buildingName:e.buildingName,bonusContributor:e.bonusContributor,isActive:e.isActive,handleActive:function(){return e.handleActive()},setBonusContributor:function(t){return e.setBonusContributorOf(t,e.buildingName)}}):"",o.a.createElement("div",{className:"".concat(n," text-center bordered-round"),onClick:e.handleBuilt,id:e.buildingName},e.buildingName,t)},T=function(e){return o.a.createElement(f.a,null,o.a.createElement(h.a,{className:"text-center"},o.a.createElement(C.a,null,e.columnData.buildingLevel)),e.columnData.buildings.map(function(t){return o.a.createElement(S,{key:t.buildingName,buildingName:t.buildingName,bonusContributor:t.bonusContributor,isBuilt:t.isBuilt,isActive:t.isActive,hasBonusPanel:e.columnData.buildingLevel>=4,handleBuilt:function(){e.toggleBuiltOf(t.buildingName)},handleActive:function(){e.toggleActiveOf(t.buildingName)},setBonusContributorOf:function(t,n){return e.setBonusContributorOf(t,n)}})}))},P=function(e){return o.a.createElement(p.a,null,o.a.createElement(m.a,null,e.buildingsData.map(function(t,n){return o.a.createElement(T,{key:t.buildingLevel,columnData:t,toggleBuiltOf:function(t){e.toggleBuiltOf(t)},toggleActiveOf:function(t){e.toggleActiveOf(t)},setBonusContributorOf:function(t,n){return e.setBonusContributorOf(t,n)}})})))};var V=function(e){return o.a.createElement("div",null,e.isScoreLarge?o.a.createElement("h2",null,e.scoreValue):o.a.createElement("h4",null,e.scoreValue))},k=n(40);var w=function(e){return o.a.createElement(m.a,null,o.a.createElement(f.a,{className:"px-1 text-right"},o.a.createElement(k.a,{onClick:e.handleVpChipChange,href:"#",id:"increment"},"+")),o.a.createElement(f.a,{xs:"auto",className:"px-1"},e.isScoreLarge?o.a.createElement("h2",null,e.scoreValue):o.a.createElement("h4",null,e.scoreValue)),o.a.createElement(f.a,{className:"px-1 text-left"},o.a.createElement(k.a,{onClick:e.handleVpChipChange,href:"#",id:"decrement"},"-")))};var x=function(e){var t;return t=e.canChangeScore?o.a.createElement(w,{isScoreLarge:e.isScoreLarge,scoreValue:e.scoreValue,handleVpChipChange:function(t){t.preventDefault(),e.changeVpChipCount(t.target.id)}}):o.a.createElement(V,{isScoreLarge:e.isScoreLarge,scoreValue:e.scoreValue}),o.a.createElement("div",{className:"text-center bordered-round"},o.a.createElement("p",{className:"text-muted"},e.titleText),t)},L=function(e){return o.a.createElement(p.a,null,o.a.createElement(m.a,null,o.a.createElement(f.a,null,o.a.createElement(x,{titleText:"Total Points",scoreValue:e.totalVpScore,isScoreLarge:!0,canChangeScore:!1}))),o.a.createElement(m.a,null,o.a.createElement(f.a,{className:"px-1"},o.a.createElement(x,{titleText:"Chips",scoreValue:e.vpScore.vpChips,isScoreLarge:!1,canChangeScore:!0,changeVpChipCount:function(t){return e.changeVpChipCount(t)}})),o.a.createElement(f.a,{className:"px-1"},o.a.createElement(x,{titleText:"Buildings",scoreValue:e.vpScore.vpBuildings,isScoreLarge:!1,canChangeScore:!1})),o.a.createElement(f.a,{className:"px-1"},o.a.createElement(x,{titleText:"Bonuses",scoreValue:e.vpScore.vpBonuses,isScoreLarge:!1,canChangeScore:!1}))))},j=function(e){function t(){var e,n;Object(s.a)(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(n=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={vpChips:0,buildingColumns:[{buildingLevel:1,buildings:[{buildingName:"Small Indigo Plant",buildingType:"production-small",buildingPoints:1,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Small Sugar Mill",buildingType:"production-small",buildingPoints:1,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Small Market",buildingType:"violet",buildingPoints:1,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Hacienda",buildingType:"violet",buildingPoints:1,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Construction Hut",buildingType:"violet",buildingPoints:1,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Small Warehouse",buildingType:"violet",buildingPoints:1,isBuilt:!1,isActive:!0,bonusContributor:0}]},{buildingLevel:2,buildings:[{buildingName:"Indigo Plant",buildingType:"production-large",buildingPoints:2,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Sugar Mill",buildingType:"production-large",buildingPoints:2,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Hospice",buildingType:"violet",buildingPoints:2,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Office",buildingType:"violet",buildingPoints:2,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Large Market",buildingType:"violet",buildingPoints:2,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Large Warehouse",buildingType:"violet",buildingPoints:2,isBuilt:!1,isActive:!0,bonusContributor:0}]},{buildingLevel:3,buildings:[{buildingName:"Tobacco Storage",buildingType:"production-large",buildingPoints:3,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Coffee Roaster",buildingType:"production-large",buildingPoints:3,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Factory",buildingType:"violet",buildingPoints:3,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"University",buildingType:"violet",buildingPoints:3,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Harbor",buildingType:"violet",buildingPoints:3,isBuilt:!1,isActive:!0,bonusContributor:0},{buildingName:"Wharf",buildingType:"violet",buildingPoints:3,isBuilt:!1,isActive:!0,bonusContributor:0}]},{buildingLevel:4,buildings:[{buildingName:"Guild Hall",buildingType:"violet",buildingPoints:4,isBuilt:!1,isActive:!1,bonusContributor:0},{buildingName:"Customs House",buildingType:"violet",buildingPoints:4,isBuilt:!1,isActive:!1,bonusContributor:0},{buildingName:"Residence",buildingType:"violet",buildingPoints:4,isBuilt:!1,isActive:!1,bonusContributor:0},{buildingName:"City Hall",buildingType:"violet",buildingPoints:4,isBuilt:!1,isActive:!1,bonusContributor:0},{buildingName:"Fortress",buildingType:"violet",buildingPoints:4,isBuilt:!1,isActive:!1,bonusContributor:0}]}]},n.isNumber=function(e){return!isNaN(parseFloat(+e))&&isFinite(e)},n.flattenBuildingColumnsInState=function(){return n.state.buildingColumns.reduce(function(e,t){return e.concat(t.buildings)},[])},n.changePropertyOf=function(e,t,i){n.setState({buildingColumns:n.state.buildingColumns.map(function(n){return Object(a.a)({},n,{buildings:n.buildings.map(function(n){return n.buildingName===e?i(n,t):n})})})})},n.callbackForToggleBoolPropertyOf=function(e,t){if("property"in t)return Object(a.a)({},e,Object(u.a)({},t.property,!e[t.property]));console.log('otherArgs did not contain key "property"')},n.callbackForSetBonusContributorOf=function(e,t){if("contrib"in t)return n.isNumber(t.contrib)?Object(a.a)({},e,{bonusContributor:t.contrib}):Object(a.a)({},e,{bonusContributor:""});console.log('otherArgs did not contain key "contrib"')},n.toggleBoolPropertyOf=function(e,t){var i={property:e};n.changePropertyOf(t,i,n.callbackForToggleBoolPropertyOf)},n.countBuiltBuildings=function(e){return n.flattenBuildingColumnsInState().reduce(function(t,n){return n.buildingType===e&&n.isBuilt?t+1:t},0)},n.getVpBonusFor=function(e){var t=0;if(e.isActive&&e.isBuilt)switch(e.buildingName){case"Guild Hall":t=2*e.otherArgs.productionLgCount+e.otherArgs.productionSmCount;break;case"Customs House":t=Math.floor(e.otherArgs.vpChips/4);break;case"Residence":t=e.bonusContributor<=4?4:e.bonusContributor-5;break;case"City Hall":t=e.otherArgs.productionVioletCount;break;case"Fortress":t=Math.floor(e.bonusContributor/3)}return t},n.getVpBonuses=function(){var e=n.state.buildingColumns[3].buildings,t={vpChips:n.state.vpChips,productionLgCount:n.countBuiltBuildings("production-large"),productionSmCount:n.countBuiltBuildings("production-small"),productionVioletCount:n.countBuiltBuildings("violet")};return e.map(function(e){return Object(a.a)({},e,{otherArgs:t})}).map(n.getVpBonusFor).reduce(function(e,t){return e+t})},n.getVpBuildings=function(){return n.flattenBuildingColumnsInState().reduce(function(e,t){return t.isBuilt?e+t.buildingPoints:e},0)},n.changeVpChipCount=function(e){var t;t="increment"===e?1:"decrement"===e&&n.state.vpChips>0?-1:0,n.setState({vpChips:n.state.vpChips+t})},n.toggleBuiltOf=function(e){n.toggleBoolPropertyOf("isBuilt",e)},n.toggleActiveOf=function(e){n.toggleBoolPropertyOf("isActive",e)},n.setBonusContributorOf=function(e,t){var i={contrib:e};n.changePropertyOf(t,i,n.callbackForSetBonusContributorOf)},n.getTotalVpScore=function(){return n.state.vpChips+n.getVpBuildings()+n.getVpBonuses()},n.getVpScoreObject=function(){return{vpChips:n.state.vpChips,vpBuildings:n.getVpBuildings(),vpBonuses:n.getVpBonuses()}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"scoresheet"},o.a.createElement(p.a,{fluid:!0},o.a.createElement(m.a,null,o.a.createElement(f.a,null,o.a.createElement(v,null))),o.a.createElement(m.a,null,o.a.createElement(f.a,null,o.a.createElement(L,{vpScore:this.getVpScoreObject(),totalVpScore:this.getTotalVpScore(),changeVpChipCount:this.changeVpChipCount}))),o.a.createElement(m.a,null,o.a.createElement(f.a,null,o.a.createElement(P,{buildingsData:this.state.buildingColumns,toggleBuiltOf:this.toggleBuiltOf,toggleActiveOf:this.toggleActiveOf,setBonusContributorOf:this.setBonusContributorOf})))))}}]),t}(i.Component),I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(o.a.createElement(j,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/puerto-rico-scoresheet",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/puerto-rico-scoresheet","/service-worker.js");I?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):F(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):F(e)})}}()}},[[21,1,2]]]);
//# sourceMappingURL=main.9db9a1c7.chunk.js.map