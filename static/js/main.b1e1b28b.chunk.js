(this["webpackJsonppuerto-rico-scoresheet"]=this["webpackJsonppuerto-rico-scoresheet"]||[]).push([[0],{17:function(e,n,t){e.exports=t(29)},28:function(e,n,t){},29:function(e,n,t){"use strict";t.r(n);var a=t(0),l=t.n(a),r=t(6),o=t(10),u=t.n(o),s=t(8);const i="VIOLET";var c={vpChips:0,buildings:[{name:"Small Indigo Plant",type:"PRODUCTION_SMALL",points:1,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Small Sugar Mill",type:"PRODUCTION_SMALL",points:1,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Small Market",type:i,points:1,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Hacienda",type:i,points:1,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Construction Hut",type:i,points:1,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Small Warehouse",type:i,points:1,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Indigo Plant",type:"PRODUCTION_LARGE",points:2,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Sugar Mill",type:"PRODUCTION_LARGE",points:2,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Hospice",type:i,points:2,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Office",type:i,points:2,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Large Market",type:i,points:2,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Large Warehouse",type:i,points:2,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Tobacco Storage",type:"PRODUCTION_LARGE",points:3,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Coffee Roaster",type:"PRODUCTION_LARGE",points:3,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Factory",type:i,points:3,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"University",type:i,points:3,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Harbor",type:i,points:3,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Wharf",type:i,points:3,isBuilt:!1,hasWorker:null,bonusInput:null},{name:"Guild Hall",type:i,points:4,isBuilt:!1,hasWorker:!1,bonusInput:null},{name:"Customs House",type:i,points:4,isBuilt:!1,hasWorker:!1,bonusInput:null},{name:"Residence",type:i,points:4,isBuilt:!1,hasWorker:!1,bonusInput:{inputId:"islandSpaces",value:"",labelText:"Total occupied island spaces",inputPlaceholder:"Island spaces"}},{name:"City Hall",type:i,points:4,isBuilt:!1,hasWorker:!1,bonusInput:null},{name:"Fortress",type:i,points:4,isBuilt:!1,hasWorker:!1,bonusInput:{inputId:"totalWorkers",value:"",labelText:"Total number of workers",inputPlaceholder:"Total workers"}}]};var p=Object(s.b)({vpChips:function(e=c.vpChips,n){switch(n.type){case"CHANGE_VP_CHIPS":switch(n.direction){case"ADD":return e+n.amount;case"SUBTRACT":const t=e-n.amount;return t>0?t:0;default:return e}default:return e}},buildings:function(e=c.buildings,n){switch(n.type){case"TOGGLE_BUILDING_BUILT":return e.map(e=>e.name===n.buildingName?Object.assign({},e,{isBuilt:!e.isBuilt}):e);case"TOGGLE_BUILDING_HAS_WORKER":return e.map(e=>e.name===n.buildingName?Object.assign({},e,{hasWorker:!e.hasWorker}):e);case"SET_BONUS_INPUT":return e.map(e=>e.name===n.buildingName?Object.assign({},e,{bonusInput:Object.assign({},e.bonusInput,{value:n.inputValue})}):e);default:return e}}});t(27),t(28);var m=t(31),d=t(32),h=t(33);var b=()=>l.a.createElement("div",{className:"text-center bordered-round"},l.a.createElement("h4",null,"Puerto Rico Scoresheet"),l.a.createElement("p",{className:"lead text-muted"},"Helping you figure out how badly you lost since 2018"));var E=({titleText:e,isScoreLarge:n,scoreValue:t})=>l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"text-muted"},e),l.a.createElement("div",null,n?l.a.createElement("h2",null,t):l.a.createElement("h4",null,t))),g=t(1),I=t.n(g);var v=t(30);var k=({buttonText:e,idValue:n,onButtonClick:t})=>l.a.createElement(v.a,{onClick:t,href:"#",id:n},e);const C=Object(r.b)((e,n)=>({buttonText:n.buttonText,idValue:n.idValue}),(e,n)=>({onButtonClick:()=>{var t,a;e((t=n.direction,a=n.amount,{type:"CHANGE_VP_CHIPS",direction:t,amount:a}))}}))(k);C.propTypes={buttonText:I.a.string.isRequired,idValue:I.a.string.isRequired,direction:I.a.string.isRequired,amount:I.a.number.isRequired};var N=C;var T=({vpChips:e,buildingsScore:n,bonusScore:t,totalScore:a})=>l.a.createElement(m.a,null,l.a.createElement(d.a,null,l.a.createElement(h.a,null,l.a.createElement("div",{className:"text-center bordered-round"},l.a.createElement(E,{titleText:"Total Points",scoreValue:a,isScoreLarge:!0})))),l.a.createElement(d.a,null,l.a.createElement(h.a,{className:"px-1"},l.a.createElement("div",{className:"text-center bordered-round"},l.a.createElement(d.a,null,l.a.createElement(h.a,{className:"px-1 text-right"},l.a.createElement(N,{buttonText:"+",idValue:"increment",direction:"ADD",amount:1})),l.a.createElement(h.a,{xs:"auto",className:"px-1"},l.a.createElement(E,{titleText:"Chips",scoreValue:e,isScoreLarge:!1})),l.a.createElement(h.a,{className:"px-1 text-left"},l.a.createElement(N,{buttonText:"-",idValue:"decrement",direction:"SUBTRACT",amount:1}))))),l.a.createElement(h.a,{className:"px-1"},l.a.createElement("div",{className:"text-center bordered-round"},l.a.createElement(E,{titleText:"Buildings",scoreValue:n,isScoreLarge:!1}))),l.a.createElement(h.a,{className:"px-1"},l.a.createElement("div",{className:"text-center bordered-round"},l.a.createElement(E,{titleText:"Bonuses",scoreValue:t,isScoreLarge:!1})))));const B=(e,n,t)=>{const a=n.PRODUCTION_LARGE,l=n.PRODUCTION_SMALL,r=n.VIOLET;if(!e.hasWorker||!e.isBuilt)return 0;switch(e.name){case"Guild Hall":return l+2*a;case"Residence":return e.bonusInput.value<9||e.bonusInput.value>12?0:e.bonusInput.value-5;case"Fortress":return Math.floor(e.bonusInput.value/3);case"Customs House":return Math.floor(t/4);case"City Hall":return r;default:return 0}},O=(e,n)=>e.reduce((e,t)=>t.type===n&&t.isBuilt?e+1:e,0);var y=Object(r.b)(e=>{const n=e.buildings.reduce((e,n)=>n.isBuilt?e+n.points:e,0);const t=((e,n)=>{const t={PRODUCTION_LARGE:O(e,"PRODUCTION_LARGE"),PRODUCTION_SMALL:O(e,"PRODUCTION_SMALL"),VIOLET:O(e,i)};return e.reduce((e,a)=>e+B(a,t,n),0)})(e.buildings,e.vpChips),a=e.vpChips+n+t;return{vpChips:e.vpChips,buildingsScore:n,bonusScore:t,totalScore:a}})(T),W=t(38),f=t(39),L=t(35),_=t(34),x=t(36),S=t(37);var R=({name:e,inputId:n,value:t,labelText:a,inputPlaceholder:r,onBonusInputChange:o})=>l.a.createElement(_.a,null,l.a.createElement("label",{htmlFor:n,className:"mx-1 sr-only"},a),l.a.createElement("input",{type:"text",id:n,placeholder:r,value:t,className:"form-control-sm",onChange:n=>o(e,(e=>{const n=parseInt(e,10);return isNaN(n)?"":n})(n.target.value)),onClick:e=>{e.stopPropagation()}}));var w=({name:e,hasWorker:n,bonusInput:t,onWorkerChange:a,onBonusInputChange:r})=>{let o;return o=null!==t?l.a.createElement(R,{name:e,inputId:t.inputId,value:t.value,labelText:t.labelText,inputPlaceholder:t.inputPlaceholder,onBonusInputChange:r}):"",l.a.createElement("div",null,l.a.createElement("hr",{className:"my-1"}),l.a.createElement(L.a,{inline:!0,className:"justify-content-center"},l.a.createElement(_.a,{check:!0},l.a.createElement(x.a,{className:"mx-1",check:!0,onClick:e=>e.stopPropagation()},l.a.createElement(S.a,{type:"checkbox",checked:n,onClick:e=>e.stopPropagation(),onChange:()=>a(e)})," \ud83d\udc77\ud83c\udffe ?")),o))};var P=({name:e,isBuilt:n,hasWorker:t,bonusInput:a,onClick:r,onWorkerChange:o,onBonusInputChange:u})=>{const s=n?"bg-success":"bg-light";let i;return i=null!==t?l.a.createElement(w,{name:e,hasWorker:t,bonusInput:a,onWorkerChange:o,onBonusInputChange:u}):"",l.a.createElement("div",{className:"".concat(s," text-center bordered-round"),onClick:r,id:e},e,i)};var U=({buildingLevel:e,buildings:n,onBuildingClick:t,onWorkerChange:a,onBonusInputChange:r})=>l.a.createElement(h.a,null,l.a.createElement(W.a,{className:"text-center"},l.a.createElement(f.a,null,e)),n.map(e=>l.a.createElement(P,Object.assign({key:e.name},e,{onClick:()=>t(e.name),onWorkerChange:a,onBonusInputChange:r}))));var D=Object(r.b)((e,n)=>{return{buildingLevel:n.columnNumber,buildings:(t=e.buildings,a=n.columnNumber,t.filter(e=>e.points===a))};var t,a},e=>({onBuildingClick:n=>{e(function(e){return{type:"TOGGLE_BUILDING_BUILT",buildingName:e}}(n))},onWorkerChange:n=>{e(function(e){return{type:"TOGGLE_BUILDING_HAS_WORKER",buildingName:e}}(n))},onBonusInputChange:(n,t)=>{e(function(e,n){return{type:"SET_BONUS_INPUT",buildingName:e,inputValue:n}}(n,t))}}))(U);var G=()=>l.a.createElement(m.a,null,l.a.createElement(d.a,null,[1,2,3,4].map(e=>l.a.createElement(D,{key:e,columnNumber:e}))));var A=()=>l.a.createElement("div",{className:"scoresheet"},l.a.createElement(m.a,{fluid:!0},l.a.createElement(d.a,null,l.a.createElement(h.a,null,l.a.createElement(b,null))),l.a.createElement(d.a,null,l.a.createElement(h.a,null,l.a.createElement(y,null))),l.a.createElement(d.a,null,l.a.createElement(h.a,null,l.a.createElement(G,null)))));const V=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}const j=Object(s.c)(p,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());u.a.render(l.a.createElement(r.a,{store:j},l.a.createElement(A,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/puerto-rico-scoresheet",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("/puerto-rico-scoresheet","/service-worker.js");V?(!function(e){fetch(e).then(n=>{404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):H(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):H(e)})}}()}},[[17,1,2]]]);
//# sourceMappingURL=main.b1e1b28b.chunk.js.map